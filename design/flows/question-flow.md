# PIXELO - Question Flow

## Overview
- **목적**: 사용자가 일일 질문에 응답하고 성격 축 점수를 계산받으며 오브젝트를 획득
- **시작점**: 메인 홈의 질문 배너 또는 하단 네비게이션 질문 탭
- **종료점**: 결과 확인 후 공간 배치 안내 또는 홈 복귀
- **일일 질문 수**: 3~5개

---

## Flow Diagram

### Happy Path (정상 흐름)

```
[홈 화면]
    |
    v
(오늘의 질문 배너) 또는 (하단 질문 탭)
    |
    v
[질문 시작 버튼]
    |
    v
(질문 인트로 화면)
"오늘의 질문 3개가 준비되었어요"
    |
    v
[시작하기]
    |
    v
(질문 1/3)
    |
    v
[선택지 A 또는 B 탭]
    |
    v
(응답 피드백 애니메이션)
    |
    v [0.5초 후 자동 전환]
(질문 2/3)
    |
    v
[선택지 A 또는 B 탭]
    |
    v
(응답 피드백 애니메이션)
    |
    v
(질문 3/3)
    |
    v
[선택지 A 또는 B 탭]
    |
    v
(응답 완료 애니메이션)
    |
    v
(결과 계산 중 화면)
    |
    v [1-2초]
(결과 화면)
- 오늘의 응답 요약
- 변화된 성격 축 점수
- 획득 오브젝트 (있는 경우)
    |
    v
<오브젝트 획득?>
    |
    +-- Yes --> (오브젝트 획득 연출)
    |               |
    |               v
    |           [오브젝트 확인]
    |               |
    |               v
    |           (오브젝트 상세)
    |               |
    |               v
    |           <바로 배치할까요?>
    |               |
    |    +-- Yes ---+--- No ---+
    |    |                     |
    |    v                     v
    |  (공간 편집)        [나중에]
    |    |                     |
    +----+---------------------+
         |
         v
    (홈 화면)
         |
         v
    [완료]
```

### 질문 유형별 플로우

#### 양자택일 질문 (기본)

```
(질문 화면)
    |
    v
+------------------------------------------+
|                                          |
|              질문 텍스트                  |
|     "주말에 에너지를 충전하는 방법은?"     |
|                                          |
|  +------------------------------------+  |
|  |                                    |  |
|  |  A. 집에서 혼자 푹 쉬는 게 최고     |  |
|  |                                    |  |
|  +------------------------------------+  |
|                                          |
|  +------------------------------------+  |
|  |                                    |  |
|  |  B. 친구들과 활동적으로 보내기      |  |
|  |                                    |  |
|  +------------------------------------+  |
|                                          |
+------------------------------------------+
    |
    v
[선택지 탭]
    |
    v
(선택 피드백 - 선택된 카드 강조)
    |
    v
[다음 질문]
```

#### 슬라이더 질문 (선택적)

```
(질문 화면)
    |
    v
+------------------------------------------+
|                                          |
|              질문 텍스트                  |
|      "당신의 방은 얼마나 정돈되어 있나요?"  |
|                                          |
|  완전 정리                    자유분방    |
|   |----------------------------------|   |
|                   *                      |
|                  50                      |
|                                          |
|  +------------------------------------+  |
|  |             확인                   |  |
|  +------------------------------------+  |
|                                          |
+------------------------------------------+
    |
    v
[슬라이더 조절]
    |
    v
[확인 버튼]
    |
    v
[다음 질문]
```

---

## Alternative Paths

### 질문 중 앱 종료/백그라운드

```
(질문 2/3 진행 중)
    |
    v
[앱 종료/백그라운드]
    |
    v
(로컬 저장: 진행 상태 + 응답 데이터)
    |
    v
[앱 재실행]
    |
    v
(복구 팝업)
"이어서 하시겠어요?"
    |
    +-- [이어하기] --> (질문 2/3부터 재개)
    |
    +-- [처음부터] --> (질문 1/3부터)
```

### 이미 오늘 질문 완료

```
[홈 화면]
    |
    v
(질문 탭 또는 배너 탭)
    |
    v
<오늘 질문 완료?>
    |
    +-- Yes
    |
    v
(완료 화면)
"오늘의 질문은 모두 완료했어요!"
"내일 새 질문이 도착해요"
    |
    v
[지난 결과 보기] 또는 [홈으로]
```

### 연속 출석 보너스

```
(결과 화면)
    |
    v
<연속 출석 N일?>
    |
    +-- Yes (N = 7, 14, 30...)
    |
    v
(보너스 팝업)
"7일 연속 출석! 보너스 오브젝트 획득!"
    |
    v
[받기]
    |
    v
(보너스 오브젝트 획득 연출)
```

---

## Error Paths

### 네트워크 오류 (응답 제출 시)

```
[선택지 탭]
    |
    v
(응답 서버 전송)
    |
    v
<네트워크 오류?>
    |
    v
(로컬 저장)
    |
    v
(에러 토스트)
"연결이 불안정해요. 잠시 후 자동으로 저장돼요"
    |
    v
[다음 질문으로 진행] (오프라인 모드)
    |
    v
...
    |
    v
(네트워크 복구 시 자동 동기화)
```

### 서버 오류 (결과 계산 실패)

```
(응답 완료)
    |
    v
(결과 계산 요청)
    |
    v
<서버 오류?>
    |
    v
(에러 화면)
"결과를 계산하는 중 문제가 생겼어요"
    |
    v
[다시 시도] --> (재요청)
    |
    v
<재시도 실패?>
    |
    v
(안내)
"잠시 후 다시 시도해주세요.
응답은 저장되었어요."
    |
    v
[홈으로]
```

---

## Screen Details

### 1. 질문 인트로 화면

```
+------------------------------------------+
|                                          |
| [X]                                      |
|                                          |
|                                          |
|          [오늘의 질문 일러스트]            |
|                                          |
|                                          |
|                                          |
|          오늘의 질문 3개가                |
|          준비되었어요                     |
|                                          |
|          예상 소요시간: 1분               |
|                                          |
|                                          |
|   +----------------------------------+   |
|   |          시작하기                 |   |
|   +----------------------------------+   |
|                                          |
|                                          |
|          연속 7일째 응답 중              |
|                                          |
+------------------------------------------+
```

---

### 2. 질문 화면

```
+------------------------------------------+
|                                          |
| [X]                         1 / 3        |
|                                          |
|  [========----------]  33%              |
|                                          |
|                                          |
|                                          |
|         주말에 에너지를                   |
|         충전하는 방법은?                  |
|                                          |
|                                          |
|                                          |
|  +------------------------------------+  |
|  |                                    |  |
|  |     집에서 혼자 푹 쉬는 게 최고     |  |
|  |                                    |  |
|  +------------------------------------+  |
|                                          |
|  +------------------------------------+  |
|  |                                    |  |
|  |     친구들과 활동적으로 보내기      |  |
|  |                                    |  |
|  +------------------------------------+  |
|                                          |
|                                          |
|         [관련 측정축: 에너지 방향]        |
|                                          |
+------------------------------------------+
```

**화면 요소**:
- 진행률 바: 현재 질문 / 전체 질문
- 질문 텍스트: 명확하고 짧게
- 선택지 카드: 2개 (A, B)
- 측정축 힌트: 어떤 축에 영향 주는지 (선택적)

---

### 3. 선택 피드백

```
+------------------------------------------+
|                                          |
| [X]                         1 / 3        |
|                                          |
|  [========----------]  33%              |
|                                          |
|                                          |
|                                          |
|         주말에 에너지를                   |
|         충전하는 방법은?                  |
|                                          |
|                                          |
|                                          |
|  +====================================+  |
|  ||                                  ||  |
|  ||  v  집에서 혼자 푹 쉬는 게 최고   ||  |
|  ||     [선택됨 - 강조 표시]          ||  |
|  +====================================+  |
|                                          |
|  +------------------------------------+  |
|  |                                    |  |
|  |     친구들과 활동적으로 보내기      |  |
|  |     [흐리게 처리]                  |  |
|  +------------------------------------+  |
|                                          |
|                                          |
|                                          |
+------------------------------------------+

0.5초 후 자동으로 다음 질문 전환
```

---

### 4. 결과 계산 중 화면

```
+------------------------------------------+
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|          [픽셀 캐릭터 애니메이션]         |
|          (생각하는 모션)                  |
|                                          |
|                                          |
|          응답을 분석하고 있어요...        |
|                                          |
|                                          |
|          [로딩 인디케이터]               |
|                                          |
|                                          |
|                                          |
|                                          |
+------------------------------------------+
```

---

### 5. 결과 화면 (오브젝트 획득 시)

```
+------------------------------------------+
|                                          |
|                         [X]              |
|                                          |
|          오늘의 결과                      |
|                                          |
|  +------------------------------------+  |
|  |  오늘의 성향 변화                   |  |
|  |                                    |  |
|  |  에너지 방향                        |  |
|  |  내향 [====*-----] 외향  +5        |  |
|  |                                    |  |
|  |  생활 패턴                         |  |
|  |  루틴 [---*======] 즉흥  +3        |  |
|  +------------------------------------+  |
|                                          |
|  +------------------------------------+  |
|  |      [오브젝트 획득!]               |  |
|  |                                    |  |
|  |        [픽셀 스탠드 조명]           |  |
|  |        [오브젝트 이미지]            |  |
|  |                                    |  |
|  |   "아늑한 조명을 좋아하는 당신!"     |  |
|  +------------------------------------+  |
|                                          |
|   +----------------------------------+   |
|   |       공간에 배치하기             |   |
|   +----------------------------------+   |
|                                          |
|          나중에 배치할게요               |
|                                          |
+------------------------------------------+
```

---

### 6. 결과 화면 (오브젝트 미획득 시)

```
+------------------------------------------+
|                                          |
|                         [X]              |
|                                          |
|          오늘의 결과                      |
|                                          |
|  +------------------------------------+  |
|  |  오늘의 성향 변화                   |  |
|  |                                    |  |
|  |  에너지 방향                        |  |
|  |  내향 [====*-----] 외향  +5        |  |
|  |                                    |  |
|  |  도전 성향                         |  |
|  |  안정 [------*===] 모험  +2        |  |
|  +------------------------------------+  |
|                                          |
|  +------------------------------------+  |
|  |  다음 오브젝트까지                  |  |
|  |                                    |  |
|  |  [==========--------] 70%          |  |
|  |  3일 더 응답하면 획득!              |  |
|  +------------------------------------+  |
|                                          |
|   +----------------------------------+   |
|   |         확인                      |   |
|   +----------------------------------+   |
|                                          |
|       내 공간 구경하기                   |
|                                          |
+------------------------------------------+
```

---

## Interaction Details

### 선택지 탭 인터랙션
1. 탭 시 ripple 효과
2. 선택된 카드 확대 + 테두리 강조
3. 비선택 카드 축소 + 흐리게
4. 체크 아이콘 표시
5. 0.5초 후 슬라이드 전환

### 진행률 바 애니메이션
- 질문 전환 시 부드럽게 증가
- 완료 시 100% 도달 + 색상 변화

### 결과 화면 애니메이션
- 성향 그래프: 순차적 등장 (0.3초 간격)
- 점수 변화: 카운트업 애니메이션
- 오브젝트: 반짝임 + 떠오르는 효과

---

## 7개 측정축 점수 계산

### 점수 계산 로직

```
각 질문은 1개 이상의 측정축에 영향

질문 응답 → 해당 축 점수 변화
- 선택지 A: 왼쪽 성향 +N점
- 선택지 B: 오른쪽 성향 +N점

점수 범위: 0 ~ 100
- 초기값: 50 (중립)
- 변화량: 질문당 +-3~5점
```

### 예시

```
질문: "주말에 에너지를 충전하는 방법은?"
영향 측정축: 에너지 방향

A. 집에서 혼자 푹 쉬는 게 최고 → 내향 +5
B. 친구들과 활동적으로 보내기 → 외향 +5

현재 점수: 45 (약간 내향)
A 선택 시: 45 - 5 = 40 (내향 강화)
B 선택 시: 45 + 5 = 50 (중립으로)
```

---

## Object Acquisition Logic

### 오브젝트 획득 조건

```
조건 1: 누적 응답 수
- 5회 응답 완료 → 첫 번째 오브젝트
- 10회 응답 완료 → 두 번째 오브젝트
- ...

조건 2: 특정 성향 도달
- 에너지 방향 80+ → "아늑한 스탠드 조명"
- 미적 취향 30- → "미니멀 책상"
- ...

조건 3: 연속 출석
- 7일 연속 → 보너스 오브젝트
- 14일 연속 → 희귀 오브젝트
- 30일 연속 → 레어 오브젝트
```

### 오브젝트 카테고리

| 카테고리 | 예시 | 획득 조건 |
|----------|------|-----------|
| 가구 | 침대, 책상, 의자 | 기본 응답 |
| 조명 | 스탠드, 무드등 | 에너지 방향 관련 |
| 소품 | 책, 식물, 액자 | 감성 스타일 관련 |
| 바닥/벽 | 러그, 포스터 | 미적 취향 관련 |
| 특별 | 희귀 아이템 | 연속 출석 |

---

## UX Considerations

### 응답 마찰 최소화
1. **탭 1번으로 응답**: 복잡한 UI 없이 카드 탭
2. **자동 전환**: 다음 버튼 없이 자동 진행
3. **빠른 완료**: 3개 질문 x 5초 = 약 15초
4. **진행감 표시**: 항상 몇 번째 질문인지 표시

### 동기 부여
1. **오브젝트 획득 기대감**: 다음 오브젝트까지 진행률
2. **연속 출석 표시**: 스트릭 유지 동기
3. **성향 변화 시각화**: 점수 변화를 그래프로
4. **즉각적 보상**: 획득 시 화려한 연출

### 재미 요소
1. **다양한 질문**: 매일 새로운 질문
2. **의외의 결과**: 예상 못한 성향 발견
3. **수집 욕구**: 오브젝트 컬렉션 완성
4. **캐릭터성**: 픽셀 캐릭터의 코멘트

---

## States

### 질문 화면 상태

| 상태 | 설명 |
|------|------|
| Default | 두 선택지 모두 선택 가능 |
| Selected | 하나 선택됨, 피드백 표시 중 |
| Transitioning | 다음 질문으로 전환 중 |

### 결과 화면 상태

| 상태 | 설명 |
|------|------|
| Loading | 결과 계산 중 |
| With Object | 오브젝트 획득 성공 |
| Without Object | 오브젝트 미획득 |
| Error | 계산 실패 |

---

## Analytics Events

| 이벤트 | 시점 | 파라미터 |
|--------|------|----------|
| question_start | 질문 시작 | question_count |
| question_answer | 각 질문 응답 | question_id, answer, time_taken |
| question_complete | 전체 질문 완료 | total_time |
| object_acquired | 오브젝트 획득 | object_id, object_name |
| result_view | 결과 화면 조회 | has_object |
| place_object_click | 배치하기 클릭 | object_id |
| skip_place_click | 나중에 클릭 | object_id |

---

## Edge Cases

| 상황 | 처리 |
|------|------|
| 질문 응답 중 자정 넘김 | 시작한 날짜 기준으로 처리 |
| 동일 질문 재등장 | 최소 7일 간격 유지 |
| 모든 오브젝트 획득 | 시즌 완료 축하 + 시즌 2 예고 |
| 점수 극단값 (0 또는 100) | 더 이상 해당 방향 증가 없음 |

---

## Related Documents

- 메인 플로우: `/design/flows/main-flow.md`
- 공간 관리 플로우: `/design/flows/space-flow.md`
